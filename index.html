<!DOCTYPE html>
<html lang="en" dir="ltr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title data-i18n="pageTitle">Matushka - Russian Language Teaching Materials</title>
    <meta name="description" content="Discover, download, and cite authentic Russian media content for language education">
    <meta name="theme-color" content="#4f46e5">

    <!-- Favicon -->
    <link rel="icon" type="image/svg+xml" href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'%3E%3Cdefs%3E%3ClinearGradient id='g' x1='0%25' y1='0%25' x2='100%25' y2='100%25'%3E%3Cstop offset='0%25' stop-color='%234f46e5'/%3E%3Cstop offset='100%25' stop-color='%236366f1'/%3E%3C/linearGradient%3E%3C/defs%3E%3Crect width='100' height='100' rx='20' fill='url(%23g)'/%3E%3Ctext x='50' y='68' font-size='50' text-anchor='middle' fill='white' font-family='system-ui' font-weight='700'%3EM%3C/text%3E%3C/svg%3E">

    <!-- Preconnect to Google Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>

    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <a href="#main-content" class="skip-link" data-i18n="skipToMain">Skip to main content</a>

    <!-- Header -->
    <header class="site-header">
        <h1 class="site-title" data-i18n="appTitle">Matushka</h1>
        <div class="lang-toggle" role="group" aria-label="Language selection">
            <button type="button" class="lang-btn active" data-lang="en" aria-pressed="true">EN</button>
            <button type="button" class="lang-btn" data-lang="ru" aria-pressed="false">RU</button>
        </div>
    </header>

    <!-- Main Content -->
    <main id="main-content">
        <!-- Hero Section -->
        <section class="hero" aria-labelledby="heroHeading">
            <h2 id="heroHeading" class="hero-title" data-i18n="heroTitle">Russian Language Teaching Materials</h2>
            <p class="hero-subtitle" data-i18n="heroSubtitle">Discover authentic Russian media content from trusted sources. Download audio files and generate proper academic citations.</p>
        </section>

        <!-- Error Messages -->
        <div id="errorContainer" class="error-container" role="alert" aria-live="assertive" hidden></div>

        <!-- Search Form -->
        <form id="searchForm" class="search-form" aria-label="Video search">
            <!-- Keyword Search -->
            <div class="search-bar">
                <label for="searchQuery" class="visually-hidden" data-i18n="searchLabel">Search keywords</label>
                <input type="search" id="searchQuery" name="query" placeholder="Search videos..." data-i18n-placeholder="searchPlaceholder" autocomplete="off">
                <button type="submit" class="btn btn-primary" data-i18n="searchBtn">Search</button>
            </div>

            <!-- Filters Grid -->
            <div class="filters-grid">
                <!-- Duration Filter -->
                <fieldset class="filter-group">
                    <legend data-i18n="durationTitle">Duration (seconds)</legend>
                    <div class="field-row">
                        <div class="field">
                            <label for="minDuration" data-i18n="minDuration">Min</label>
                            <input type="number" id="minDuration" name="minDuration" min="0" value="0">
                        </div>
                        <div class="field">
                            <label for="maxDuration" data-i18n="maxDuration">Max</label>
                            <input type="number" id="maxDuration" name="maxDuration" min="0" value="3600">
                        </div>
                    </div>
                </fieldset>

                <!-- Date Range Filter -->
                <fieldset class="filter-group">
                    <legend data-i18n="dateRangeTitle">Date Range</legend>
                    <div class="field-row">
                        <div class="field">
                            <label for="startDate" data-i18n="startDate">Start</label>
                            <input type="date" id="startDate" name="startDate">
                        </div>
                        <div class="field">
                            <label for="endDate" data-i18n="endDate">End</label>
                            <input type="date" id="endDate" name="endDate">
                        </div>
                    </div>
                </fieldset>

                <!-- Max Results -->
                <fieldset class="filter-group">
                    <legend data-i18n="maxResultsTitle">Max Results</legend>
                    <div class="field">
                        <label for="maxResults" class="visually-hidden" data-i18n="maxResultsLabel">Number of results</label>
                        <input type="number" id="maxResults" name="maxResults" min="1" max="100" value="20">
                    </div>
                </fieldset>
            </div>

            <!-- Categories Filter -->
            <fieldset class="filter-group filter-group-wide">
                <legend data-i18n="categoriesTitle">Categories</legend>
                <div class="checkbox-group">
                    <label><input type="checkbox" name="category" value="politics" checked> <span data-i18n="catPolitics">Politics</span></label>
                    <label><input type="checkbox" name="category" value="economy" checked> <span data-i18n="catEconomy">Economy</span></label>
                    <label><input type="checkbox" name="category" value="society" checked> <span data-i18n="catSociety">Society</span></label>
                    <label><input type="checkbox" name="category" value="world" checked> <span data-i18n="catWorld">World</span></label>
                    <label><input type="checkbox" name="category" value="sports"> <span data-i18n="catSports">Sports</span></label>
                    <label><input type="checkbox" name="category" value="culture"> <span data-i18n="catCulture">Culture</span></label>
                    <label><input type="checkbox" name="category" value="science"> <span data-i18n="catScience">Science</span></label>
                    <label><input type="checkbox" name="category" value="technology"> <span data-i18n="catTechnology">Technology</span></label>
                </div>
            </fieldset>

            <!-- Sources Filter -->
            <fieldset class="filter-group filter-group-wide">
                <legend data-i18n="sourcesTitle">Sources</legend>
                <div class="checkbox-group">
                    <label><input type="checkbox" name="source" value="1tv:news" checked> <span data-i18n="src1tv">Channel One News</span></label>
                    <label><input type="checkbox" name="source" value="1tv:vremya"> <span data-i18n="src1tvVremya">Vremya</span></label>
                    <label><input type="checkbox" name="source" value="smotrim:news" checked> <span data-i18n="srcSmotrim">Smotrim</span></label>
                    <label><input type="checkbox" name="source" value="rt:news"> <span data-i18n="srcRt">RT News</span></label>
                    <label><input type="checkbox" name="source" value="izvestia:video"> <span data-i18n="srcIzvestia">Izvestia</span></label>
                    <label><input type="checkbox" name="source" value="ntv:video"> <span data-i18n="srcNtv">NTV</span></label>
                    <label><input type="checkbox" name="source" value="ria:video"> <span data-i18n="srcRia">RIA Novosti</span></label>
                    <label><input type="checkbox" name="source" value="tass:video"> <span data-i18n="srcTass">TASS</span></label>
                    <label><input type="checkbox" name="source" value="kommersant:video"> <span data-i18n="srcKommersant">Kommersant</span></label>
                </div>
            </fieldset>

            <!-- Form Actions -->
            <div class="form-actions">
                <button type="submit" class="btn btn-primary" data-i18n="searchBtn">Search</button>
                <button type="reset" class="btn btn-secondary" data-i18n="resetBtn">Reset</button>
            </div>
        </form>

        <!-- Loading Indicator -->
        <div id="loadingIndicator" class="loading-container" role="status" aria-live="polite" hidden>
            <div class="loading-content">
                <span class="spinner" aria-hidden="true"></span>
                <span class="loading-text" data-i18n="loadingText">Loading...</span>
            </div>
            <div class="progress-bar-container">
                <div class="progress-bar" id="progressBar"></div>
            </div>
            <span class="loading-status" id="loadingStatus"></span>
        </div>

        <!-- Results Section -->
        <section id="resultsSection" class="results-section" aria-labelledby="resultsHeading">
            <div class="results-header">
                <h2 id="resultsHeading">
                    <span data-i18n="resultsTitle">Results</span>
                    <span id="resultsCount" class="results-count">(0)</span>
                </h2>
                <div class="results-actions">
                    <div class="selection-info" id="selectionInfo" hidden>
                        <span class="selection-badge">
                            <span id="selectionCount">0</span>
                            <span data-i18n="selectedVideos">selected</span>
                        </span>
                    </div>
                    <button type="button" class="btn btn-primary" id="downloadAudioBtn" data-i18n="downloadBtn">Download Audio</button>
                    <div class="sort-controls">
                        <label for="sortSelect" class="visually-hidden" data-i18n="sortLabel">Sort by</label>
                        <select id="sortSelect" class="sort-select">
                            <option value="relevance" data-i18n="sortRelevance">Relevance</option>
                            <option value="date-desc" data-i18n="sortDateDesc">Date (newest)</option>
                            <option value="date-asc" data-i18n="sortDateAsc">Date (oldest)</option>
                            <option value="duration-desc" data-i18n="sortDurationDesc">Duration (longest)</option>
                            <option value="duration-asc" data-i18n="sortDurationAsc">Duration (shortest)</option>
                            <option value="title-asc" data-i18n="sortTitleAsc">Title (A-Z)</option>
                            <option value="title-desc" data-i18n="sortTitleDesc">Title (Z-A)</option>
                        </select>
                    </div>
                </div>
            </div>

            <div id="resultsGrid" class="results-grid" role="list" aria-label="Search results"></div>

            <p id="emptyState" class="empty-state" data-i18n="emptyStateDesc">Enter search terms and click Search to find videos.</p>
        </section>

        <!-- Video Card Template -->
        <template id="videoCardTemplate">
            <article class="video-card" role="listitem">
                <div class="video-thumbnail">
                    <img src="" alt="" loading="lazy">
                    <span class="video-duration"></span>
                </div>
                <div class="video-info">
                    <h3 class="video-title"></h3>
                    <p class="video-program"></p>
                    <p class="video-meta">
                        <time class="video-date"></time>
                        <span class="video-source"></span>
                        <span class="video-category"></span>
                    </p>
                </div>
                <div class="video-actions">
                    <label class="select-video">
                        <input type="checkbox" class="video-select">
                        <span data-i18n="selectForCitation">Select</span>
                    </label>
                    <a href="#" class="video-link" target="_blank" rel="noopener" data-i18n="watchVideo">Watch</a>
                </div>
            </article>
        </template>

        <!-- Citations Panel -->
        <aside id="citationsPanel" class="citations-panel" aria-labelledby="citationsHeading">
            <div class="citations-header">
                <h3 id="citationsHeading" data-i18n="citationsTitle">Citations</h3>
                <button type="button" class="btn btn-secondary btn-sm" id="copyCitationBtn" data-i18n="copyBtn">Copy Citations</button>
            </div>
            <div class="citation-formats" role="tablist" aria-label="Citation format">
                <button type="button" role="tab" aria-selected="true" data-format="apa" id="tabApa" aria-controls="citationOutput">APA</button>
                <button type="button" role="tab" aria-selected="false" data-format="mla" id="tabMla" aria-controls="citationOutput">MLA</button>
                <button type="button" role="tab" aria-selected="false" data-format="chicago" id="tabChicago" aria-controls="citationOutput">Chicago</button>
                <button type="button" role="tab" aria-selected="false" data-format="bibtex" id="tabBibtex" aria-controls="citationOutput">BibTeX</button>
            </div>
            <div id="citationOutput" class="citation-output" role="tabpanel" aria-labelledby="tabApa">
                <pre id="citationText"><code data-i18n="citationPlaceholder">Select videos to generate citations...</code></pre>
            </div>
        </aside>
    </main>

    <!-- Footer -->
    <footer class="site-footer">
        <p data-i18n="footerCopyright">Matushka 2024</p>
        <p class="version"><span data-i18n="versionLabel">Version</span> <span id="appVersion">2.0.0</span></p>
    </footer>

    <!-- Screen Reader Announcements -->
    <div id="announcer" class="visually-hidden" role="status" aria-live="polite" aria-atomic="true"></div>

    <script src="app.js" defer></script>
</body>
</html>
