<!DOCTYPE html>
<html lang="en" dir="ltr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title data-i18n="pageTitle">Matushka - Video Archive Search</title>
    <meta name="description" content="Video archive search platform for educational purposes">
    <link rel="icon" type="image/svg+xml" href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'%3E%3Ccircle cx='50' cy='50' r='45' fill='%236366f1'/%3E%3Ctext x='50' y='68' font-size='45' text-anchor='middle' fill='white' font-family='serif' font-weight='bold'%3EM%3C/text%3E%3C/svg%3E">
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <a href="#main-content" class="skip-link" data-i18n="skipToMain">Skip to main content</a>

    <!-- Header -->
    <header class="site-header">
        <h1 class="site-title" data-i18n="appTitle">Matushka</h1>
        <div class="lang-toggle" role="group" aria-label="Language selection">
            <button type="button" class="lang-btn active" data-lang="en" aria-pressed="true">EN</button>
            <button type="button" class="lang-btn" data-lang="ru" aria-pressed="false">RU</button>
        </div>
    </header>

    <!-- Main Content -->
    <main id="main-content">
        <!-- Error Messages -->
        <div id="errorContainer" class="error-container" role="alert" aria-live="assertive" hidden></div>

        <!-- Search Form -->
        <form id="searchForm" class="search-form" aria-label="Video search">
            <!-- Keyword Search -->
            <div class="search-bar">
                <label for="searchQuery" class="visually-hidden" data-i18n="searchLabel">Search keywords</label>
                <input type="search" id="searchQuery" name="query" placeholder="Search videos..." data-i18n-placeholder="searchPlaceholder" autocomplete="off">
                <button type="submit" class="btn btn-primary" data-i18n="searchBtn">Search</button>
            </div>

            <!-- Duration Filter -->
            <fieldset class="filter-group">
                <legend data-i18n="durationTitle">Duration (seconds)</legend>
                <div class="field-row">
                    <div class="field">
                        <label for="minDuration" data-i18n="minDuration">Min</label>
                        <input type="number" id="minDuration" name="minDuration" min="0" value="0">
                    </div>
                    <div class="field">
                        <label for="maxDuration" data-i18n="maxDuration">Max</label>
                        <input type="number" id="maxDuration" name="maxDuration" min="0" value="3600">
                    </div>
                </div>
            </fieldset>

            <!-- Date Range Filter -->
            <fieldset class="filter-group">
                <legend data-i18n="dateRangeTitle">Date Range</legend>
                <div class="field-row">
                    <div class="field">
                        <label for="startDate" data-i18n="startDate">Start</label>
                        <input type="date" id="startDate" name="startDate">
                    </div>
                    <div class="field">
                        <label for="endDate" data-i18n="endDate">End</label>
                        <input type="date" id="endDate" name="endDate">
                    </div>
                </div>
            </fieldset>

            <!-- Categories Filter -->
            <fieldset class="filter-group">
                <legend data-i18n="categoriesTitle">Categories</legend>
                <div class="checkbox-group">
                    <label><input type="checkbox" name="category" value="politics"> <span data-i18n="catPolitics">Politics</span></label>
                    <label><input type="checkbox" name="category" value="economy"> <span data-i18n="catEconomy">Economy</span></label>
                    <label><input type="checkbox" name="category" value="society"> <span data-i18n="catSociety">Society</span></label>
                    <label><input type="checkbox" name="category" value="world"> <span data-i18n="catWorld">World</span></label>
                    <label><input type="checkbox" name="category" value="sports"> <span data-i18n="catSports">Sports</span></label>
                    <label><input type="checkbox" name="category" value="culture"> <span data-i18n="catCulture">Culture</span></label>
                    <label><input type="checkbox" name="category" value="science"> <span data-i18n="catScience">Science</span></label>
                    <label><input type="checkbox" name="category" value="technology"> <span data-i18n="catTechnology">Technology</span></label>
                </div>
            </fieldset>

            <!-- Sources Filter -->
            <fieldset class="filter-group">
                <legend data-i18n="sourcesTitle">Sources</legend>
                <div class="checkbox-group">
                    <label><input type="checkbox" name="source" value="1tv"> <span data-i18n="src1tv">Channel One</span></label>
                    <label><input type="checkbox" name="source" value="smotrim"> <span data-i18n="srcSmotrim">Smotrim</span></label>
                    <label><input type="checkbox" name="source" value="rt"> <span data-i18n="srcRt">RT</span></label>
                    <label><input type="checkbox" name="source" value="rutube"> <span data-i18n="srcRutube">Rutube</span></label>
                    <label><input type="checkbox" name="source" value="izvestia"> <span data-i18n="srcIzvestia">Izvestia</span></label>
                </div>
            </fieldset>

            <!-- Max Results -->
            <fieldset class="filter-group">
                <legend data-i18n="maxResultsTitle">Max Results</legend>
                <div class="field">
                    <label for="maxResults" class="visually-hidden" data-i18n="maxResultsLabel">Number of results</label>
                    <input type="number" id="maxResults" name="maxResults" min="1" max="100" value="20">
                </div>
            </fieldset>

            <!-- Form Actions -->
            <div class="form-actions">
                <button type="submit" class="btn btn-primary" data-i18n="searchBtn">Search</button>
                <button type="reset" class="btn btn-secondary" data-i18n="resetBtn">Reset</button>
            </div>
        </form>

        <!-- Loading Indicator -->
        <div id="loadingIndicator" class="loading" role="status" aria-live="polite" hidden>
            <span class="spinner" aria-hidden="true"></span>
            <span data-i18n="loadingText">Loading...</span>
        </div>

        <!-- Results Section -->
        <section id="resultsSection" class="results-section" aria-labelledby="resultsHeading">
            <h2 id="resultsHeading">
                <span data-i18n="resultsTitle">Results</span>
                <span id="resultsCount" class="results-count">(0)</span>
            </h2>

            <div id="resultsGrid" class="results-grid" role="list" aria-label="Search results"></div>

            <p id="emptyState" class="empty-state" data-i18n="emptyStateDesc">Enter search terms and click Search to find videos.</p>
        </section>

        <!-- Video Card Template -->
        <template id="videoCardTemplate">
            <article class="video-card" role="listitem">
                <div class="video-thumbnail">
                    <img src="" alt="" loading="lazy">
                    <span class="video-duration"></span>
                </div>
                <div class="video-info">
                    <h3 class="video-title"></h3>
                    <p class="video-meta">
                        <time class="video-date"></time>
                        <span class="video-source"></span>
                        <span class="video-category"></span>
                    </p>
                </div>
                <div class="video-actions">
                    <label class="select-video">
                        <input type="checkbox" class="video-select">
                        <span data-i18n="selectForCitation">Select</span>
                    </label>
                    <a href="#" class="video-link" target="_blank" rel="noopener" data-i18n="watchVideo">Watch</a>
                </div>
            </article>
        </template>

        <!-- Citations Panel -->
        <aside id="citationsPanel" class="citations-panel" aria-labelledby="citationsHeading">
            <button type="button" class="panel-toggle" aria-expanded="false" aria-controls="citationsContent">
                <span id="citationsHeading" data-i18n="citationsTitle">Citations</span>
                <span class="toggle-indicator" aria-hidden="true">[+]</span>
            </button>
            <div id="citationsContent" class="panel-content" hidden>
                <div class="citation-formats" role="tablist" aria-label="Citation format">
                    <button type="button" role="tab" aria-selected="true" data-format="apa" id="tabApa" aria-controls="citationOutput">APA</button>
                    <button type="button" role="tab" aria-selected="false" data-format="mla" id="tabMla" aria-controls="citationOutput">MLA</button>
                    <button type="button" role="tab" aria-selected="false" data-format="chicago" id="tabChicago" aria-controls="citationOutput">Chicago</button>
                    <button type="button" role="tab" aria-selected="false" data-format="bibtex" id="tabBibtex" aria-controls="citationOutput">BibTeX</button>
                </div>
                <div id="citationOutput" class="citation-output" role="tabpanel" aria-labelledby="tabApa">
                    <pre id="citationText"><code data-i18n="citationPlaceholder">Select videos to generate citations...</code></pre>
                </div>
                <div class="citation-actions">
                    <button type="button" class="btn btn-secondary" id="copyCitationBtn" data-i18n="copyBtn">Copy</button>
                    <button type="button" class="btn btn-secondary" id="downloadCitationBtn" data-i18n="downloadBtn">Download</button>
                </div>
            </div>
        </aside>
    </main>

    <!-- Footer -->
    <footer class="site-footer">
        <p data-i18n="footerCopyright">Matushka 2024</p>
        <p class="version"><span data-i18n="versionLabel">Version</span> <span id="appVersion">1.0.0</span></p>
    </footer>

    <!-- Screen Reader Announcements -->
    <div id="announcer" class="visually-hidden" role="status" aria-live="polite" aria-atomic="true"></div>

    <script src="app.js" defer></script>
</body>
</html>
